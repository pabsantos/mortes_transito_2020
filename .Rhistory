ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(pie_data, 3, 8, 0.3)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
data %>%
ggplot(aes(x = "", y = perc, fill = tipo_vitima)) +
geom_bar(color = "white", width = 1, stat = "identity", lwd = line_size) +
coord_polar("y") +
facet_wrap(~ano) +
geom_text(
aes(label = label, x = 1.67),
position = position_stack(vjust = 0.5),
size = label_size
) +
theme_void() +
labs(fill = "") +
scale_fill_brewer(palette = "Dark2") +
theme(
legend.text = element_text(size = legend_size),
panel.background = element_rect(fill = "white")
)
plot_pie <- function(data, label_size, legend_size, line_size) {
data %>%
ggplot(aes(x = "", y = perc, fill = tipo_vitima)) +
geom_bar(color = "white", width = 1, stat = "identity", lwd = line_size) +
coord_polar("y") +
facet_wrap(~ano) +
geom_text(
aes(label = label, x = 1.67),
position = position_stack(vjust = 0.5),
size = label_size
) +
theme_void() +
labs(fill = "") +
scale_fill_brewer(palette = "Dark2") +
theme(
legend.text = element_text(size = legend_size),
panel.background = element_rect(fill = "white")
)
}
tipos_pie_plot <- plot_pie(pie_data, 3, 8, 0.3)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
plot_pie <- function(data, label_size, label_pos, legend_size, line_size) {
data %>%
ggplot(aes(x = "", y = perc, fill = tipo_vitima)) +
geom_bar(color = "white", width = 1, stat = "identity", lwd = line_size) +
coord_polar("y") +
facet_wrap(~ano) +
geom_text(
aes(label = label, x = label_pos),
position = position_stack(vjust = 0.5),
size = label_size
) +
theme_void() +
labs(fill = "") +
scale_fill_brewer(palette = "Dark2") +
theme(legend.text = element_text(size = legend_size))
}
tipos_pie_plot <- plot_pie(pie_data, 3, 1.7, 8, 0.3)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(pie_data, 2.5, 1.7, 8, 0.3)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 8,
line_size = 0.2
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
View(tipo_delta)
plot_pie <- function(data, label_size, label_pos, legend_size, line_size, key_size) {
data %>%
ggplot(aes(x = "", y = perc, fill = tipo_vitima)) +
geom_bar(color = "white", width = 1, stat = "identity", lwd = line_size) +
coord_polar("y") +
facet_wrap(~ano) +
geom_text(
aes(label = label, x = label_pos),
position = position_stack(vjust = 0.5),
size = label_size
) +
theme_void() +
labs(fill = "") +
scale_fill_brewer(palette = "Dark2") +
theme(
legend.text = element_text(size = legend_size),
legend.key.size = unit(key_size, "cm"))
}
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 7,
line_size = 0.2,
key_size = 1
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 7,
line_size = 0.2,
key_size = 0.3
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 7,
line_size = 0.2,
key_size = 0.5
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 7,
line_size = 0.2,
key_size = 0.4
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
tipos_pie_plot <- plot_pie(
pie_data,
label_size = 2.5,
label_pos = 1.7,
legend_size = 6,
line_size = 0.2,
key_size = 0.4
)
ggsave(
"plot/pie_chart.png",
plot = tipos_pie_plot,
device = "png",
width = 6,
height = 3.5,
dpi = 300
)
View(tipo_delta)
View(uf_delta)
plot(br)
br <- geobr::read_state(code_state = "ALL")
br <- geobr::read_state(code_state = "all")
plot(br)
geobr::read_state(code_state = "all")
br <- geobr::read_state(code_state = "all")
library(tmap)
library(sf)
qtm(br)
qtm(bbox = NA, br)
st_bbox(br)
st_read("data/bcim_2016_21_11_2018.gpkg")
st_read("data/bcim_2016_21_11_2018.gpkg")
st_read("data/BRUFE250GC_SIR")
st_read("data/BRUFE250GC_SIR.shp")
br <- st_read("data/BRUFE250GC_SIR.shp")
plot(br)
?left_join
br %>%
left_join(uf_delta, by = c("SIGLA" = "uf"))
br <- br %>%
left_join(uf_delta, by = c("SIGLA" = "uf"))
tm_shape(br) +
tm_polygons(br)
tm_shape(br) +
tm_border()
tm_shape(br) +
tm_borders(col = "grey20")
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.1)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(col = "delta")
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
labels = "")
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn")
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6)
delta_uf
uf_delta
?tm_fill
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun=function(x) paste0(formatC(x, digits=0, format="f"), " %"))
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun=scales::percent())
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format())
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_layout(
legend.format = list(text.separator = "a")
)
?tm_text
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA") +
tm_layout(
legend.format = list(text.separator = "a")
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA") +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA") +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
) +
tm_scale_bar()
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA") +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
) +
tm_scale_bar()
?tmap_save
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA") +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
) +
tm_scale_bar()
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA", size = 0.6) +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA", size = 0.6, auto.placement = TRUE) +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
?tm_text
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA", size = 0.6) +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
br_delta_plot <- tm_shape(br) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA", size = 0.5) +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
plot_uf_delta <- function(sf) {
tm_shape(sf) +
tm_borders(col = "grey20", lwd = 0.4) +
tm_fill(
col = "delta",
title = "",
palette = "-RdYlGn",
n = 6,
legend.format = list(fun = scales::percent_format(accuracy = 1))
) +
tm_text("SIGLA", size = 0.5) +
tm_layout(
legend.format = list(text.separator = "a"),
frame = NA
)
}
br_delta_plot <- plot_uf_delta()
br_delta_plot <- plot_uf_delta(br)
tmap_save(
tm = br_delta_plot,
filename = "plot/br_delta_plot.png",
width = 6,
height = 6,
dpi = 300,
)
